{% extends "base.html" %}
{% load static %}

{% block css_files %}
    <link rel="stylesheet" href="{% static 'physik/aufgabe.css' %}">
{% endblock %}

{% block content %}
    <form method="post">
    {% csrf_token %}
        <div class="task-dialog">

            <!-- Kopfzeile -->
            <div class="task-header">
            <div class="task-title">
                {{ fragenummer }} von {{ anzahl }} Aufgaben
            </div>
            <div class="task-kapitel">
                {{ aufgabe.kapitel }}
            </div>
            </div>


            <!-- Frage -->
            <div class="task-frage">
                {{ aufgabe.frage }}
            </div>

            <!-- Antwortbereich -->
            <div class="task-antwort">

                {% if aufgabe.typ == "a3" %}
                    {% for a in anzeigen %}
                    <div class="task-option">
                        <label>
                        <input type="radio" name="antwort" value="{{ a.text }}">
                        {{ a.text }}
                        </label>
                    </div>
                    {% endfor %}
                {% else %}
                    <input type="text" name="antwort" class="task-input">
                    {% if aufgabe.einheit %}
                    <span class="task-einheit">{{ aufgabe.einheit }}</span>
                    {% endif %}
                {% endif %}
            </div>

<div id="solutionBox" style="display:none;" class="solution-box">
  <strong>Lösung:</strong><br>
  {{ aufgabe.antwort }}<br><br>

  {% if aufgabe.erklaerung %}
    {{ aufgabe.erklaerung|linebreaks }}
  {% endif %}
</div>


            {% if aufgabe.bilder.exists %}
                {% with bilder=aufgabe.bilder.all %}
                {% if bilder|length > 0 %}
                    <div class="task-images row1">
                    {% for b in bilder %}
                        {% if b.position <= 2 %}
                        <img src="{{ b.bild.url }}" class="task-image">
                        {% endif %}
                    {% endfor %}
                    </div>
                    {% if bilder|length > 2 %}
                    <div class="task-images row2">
                        {% for b in bilder %}
                        {% if b.position > 2 %}
                            <img src="{{ b.bild.url }}" class="task-image">
                        {% endif %}
                        {% endfor %}
                    </div>
                    {% endif %}
                {% endif %}
                {% endwith %}
            {% endif %}

            <!-- Button-Leiste -->
            <div class="task-buttons">
                <button type="button" onclick="location.href='/'">Stop</button>
                {% if aufgabe.hilfe %}
                    <button type="button" onclick="alert('{{ aufgabe.hilfe|escapejs }}')">
                    Hilfe
                    </button>
                {% endif %}
                <button type="button" id="showSolution">Lösung anzeigen</button>
                <button type="submit">Weiter</button>
            </div>
        </div>
    </form>

<script>
document.getElementById("showSolution").addEventListener("click", function () {
  const box = document.getElementById("solutionBox");
  box.style.display = (box.style.display === "none") ? "block" : "none";
});
</script>


{% endblock %}

